<!DOCTYPE html>
<meta charset="utf-8">
<style>

</style>
<body>

<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>
<script>
        var width = 960,
                height = 1160;

        var svg = d3.select("body").append("svg")
                .attr("width", width)
                .attr("height", height);

        d3.json("map.json", function(error, mapData) {
                if (error) {return console.error(error);}

                console.log(mapData);

                var projection = d3.geo.mercator();
                var mexico;
                var path = d3.geo.path().projection(projection);
                var massachusetts = topojson.feature(mapData,mapData.objects.MA);

                projection.scale(1).translate([0,0]);

                var b = path.bounds(massachusetts);
                var s = .95 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1]-b[0][1])/height);
                var t = [(width - s* (b[1][0]+ b[0][0]))/2, (height - s* (b[1][1] + b[0][1]))/2];

                projection.scale(s).translate(t);

                var map= svg.append("g").attr("class","boundary");

                mexico = map.selectAll("path").data(massachusetts.features);

                var click = function(d) {
                        mexico.attr("fill-opacity", 0.2);
                        d3.select(this).attr("fill-opacity", 1);
                }

                mexico.enter()
                        .append("path")
                        .attr("d",path)
                        .on("click",click);

                var color =d3.scale.linear().domain([0,538]).range(["red","yellow"]);

                mexico.attr("fill",function(d,i){return color(i)});
                mexico.attr("stroke","purple");


        });

</script>

</body>
